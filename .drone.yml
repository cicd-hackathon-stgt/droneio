pipeline:

  install:
    image: node:6
    commands:
      - npm install

  test:
    group: test
    image: node:6
    commands:
      - npm run test

  frontend:
    group: test
    image: node:6
    commands:
      - npm run build

  docker:
    image: plugins/docker
    repo: cicd-hackathon-stgt/droneio
    tags: latest
    secrets: [ docker_username, docker_password ]

  execute:
    image: node:6
    commands:
      - ./droneio
